webpackJsonp([10],{"/SXb":function(e,t,a){"use strict";function n(e){var t=" !\"#$%&'()*+,-./0123456789:;<=>?@",a="abcdefghijklmnopqrstuvwxyz";t+=a.toUpperCase(),t+="[\\]^_`",t+=a,t+="{|}~";var n=e.toLowerCase(),i="0123456789abcdef",c="",o=0;for(o=0;o<n.length;o+=2){var r=n.charAt(o);":"==r&&(o++,r=n.charAt(o));var s=n.charAt(o+1),d=i.indexOf(r),u=i.indexOf(s),l=d<<4;l|=u;var f=parseInt(l),m=f-32,p="?";m>=0&&l<=126&&(p=t.charAt(m)),c+=p}return c}function i(e){if(0==e.length)return"";var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a="",n=e.length%3,i="";if(1==n){var c=e[e.length-1];i=t.charAt(c>>2),i+=t.charAt(c<<4&63),i+="=="}else if(2==n){var o=e[e.length-2],r=e[e.length-1];i=t.charAt(o>>2),i+=t.charAt((o<<4&63)+(r>>4)),i+=t.charAt(r<<2&63),i+="="}for(var s=e.length/3,d=0,u=0;u<s-(0==n?0:1);u++){d=3*u;var l=e[d+0],f=e[d+1],m=e[d+2];a+=t.charAt(l>>2)+t.charAt((l<<4&63)+(f>>4))+t.charAt(((15&f)<<2)+(m>>6))+t.charAt(63&m)}return a+i}function c(e){var t=new Array;if(e.length%4!=0||0==e.length)return t;var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=e.length,i=new Array;if("="==e.charAt(n-1))if("="==e.charAt(n-2)){var c=e.charAt(n-4),o=e.charAt(n-3),r=(a.indexOf(c)<<2&255)+(a.indexOf(o)>>4);i[0]=r}else{var c=e.charAt(n-4),o=e.charAt(n-3),s=e.charAt(n-2),r=(a.indexOf(c)<<2&255)+(a.indexOf(o)>>4),d=(a.indexOf(o)<<4&255)+(a.indexOf(s)>>2);i[0]=r,i[1]=d}for(var u=e.length/4,l=0;l<u-(0==i.length?0:1);l++){var f=4*l,m=e.charAt(f+0),p=e.charAt(f+1),D=e.charAt(f+2),h=e.charAt(f+3);t[3*l+0]=(a.indexOf(m)<<2&255)+(a.indexOf(p)>>4),t[3*l+1]=(a.indexOf(p)<<4&255)+(a.indexOf(D)>>2),t[3*l+2]=(a.indexOf(D)<<6&255)+a.indexOf(h)}return t.concat(i)}function o(e){var t=e.concat();return t.reverse(),parseInt(s(t),16)}function r(e){for(var t=[],a=0;a<e.length;a+=2)t.push(parseInt(e.substr(a,2),16));return t}function s(e){for(var t=[],a=0;a<e.length;a++)t.push((e[a]>>>4).toString(16)),t.push((15&e[a]).toString(16));return t.join("")}function d(e){var t=[];return t.push((e>>>4).toString(16)),t.push((15&e).toString(16)),t.join("")}t.g=n,t.c=i,t.a=c,t.e=o,t.f=r,t.d=s,t.b=d},ENeJ:function(e,t){},EUo3:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[e.tooltipInfo?a("div",{staticClass:"msg"},[e._v("\n      "+e._s(e.tooltipInfo)+"\n  ")]):e._e(),e._v(" "),a("router-view")],1)},i=[],c={render:n,staticRenderFns:i};t.a=c},GGBe:function(e,t,a){"use strict";var n=a("Dd8w"),i=a.n(n),c=a("aFVK"),o=a("lx87"),r=a("PApA"),s=a("m2Aq"),d=a("/SXb"),u={taskQueue:[{name:"getLCDDisplayData",isExec:!1},{name:"setLCDDTime",isExec:!1},{name:"getBattery",isExec:!1},{name:"getLCDDisplayDataNew",isExec:!1},{name:"getFlashingWarningThreshold",isExec:!1},{name:"setFlashingWarningThreshold",isExec:!1},{name:"getPersonalInfo",isExec:!1},{name:"setPersonalInfo",isExec:!1},{name:"getUserCodeVer",isExec:!1},{name:"getHolidayReminder",isExec:!1},{name:"getSport",isExec:!1},{name:"getSleep",isExec:!1},{name:"getTempRHPress",isExec:!1},{name:"getHistoricalPulse",isExec:!1}],taskQueueIndex:0,mainTheadRunIng:!1,config:{readLCDDataTheadEnable:!0,WXDeviceLibState:0,lastReadLCDDataTime:new Date("2017/1/1"),readLCDDataInterval:6,IsReadHistoryData:!1,lastSendSuccessTime:new Date("2017/1/1"),lastReceiveSuccessTime:new Date("2017/1/1"),lastSetTime:new Date("2017/1/1"),DataLen:0,ReceiveDataLen:0,CurCmd:o.a.sports,CurHandler:null,taskQueueTimeLast:new Date("2017/1/1"),LCDDisplayDataHandlerSuccessFlag:!1,SleepDataHandlerSuccessFlag:!1,SportDataHandlerSuccessFlag:!1,TempRHPressDataHandlerSuccessFlag:!1,PulseDataHandlerSuccessFlag:!1},deviceInfo:{deviceId:"",deviceType:"",connectState:!1,heartRateSwitch:!1,heartRateDate:0,tempDiffSwitch:!1,tempDiffDate:0,stepNumber:0,bracelet:5,userCodeVer:"v1.0.0",rawDeviceSetHeartRateMax:0,rawDeviceSetStepTarget:0,rawDeviceSetTempDiff:0,km:0,Height:172,Weight:60,remindonstate:!1,cycle:0,nextremind:0},deviceInfoSeting:{deviceType:2,heartRateCountRemind:0,heartRateRemind:0,sportTarget:0,sportTargetRemind:1,temperatureDifferenceRemind:0,temperatureDifferenceValue:0,lowHeartRateValue:0},userInfo:{openId:"openId"},LCDDisplayData:{sportstep:null,calorie:null,sleephour:null,heartrate:null,bodysurfacetemp:null,humidity:null,temperature:null,pressure:null},tooltipInfo:""},l={deviceInfoSetingSet:function(e,t){e.deviceInfoSeting=i()({},e.deviceInfoSeting,t)},userInfoSets:function(e,t){e.userInfo=i()({},e.userInfo,t)},saveMainTheadRunIng:function(e,t){e.mainTheadRunIng=t},configSet:function(e,t){e.config=i()({},e.config,t)},deviceInfoSet:function(e,t){e.deviceInfo=i()({},e.deviceInfo,t)},LCDDisplayDataSet:function(e,t){e.LCDDisplayData=i()({},e.LCDDisplayData,t)},taskQueueSet:function(e,t){var a=t.index;e.taskQueue[a].isExec=!0},taskQueueIndexSet:function(e,t){e.taskQueueIndex=t},taskQueueTimeLastSet:function(e,t){e.taskQueueTimeLast=new Date},tooltipInfoSet:function(e,t){c.a.w("更新到Store"),c.a.w(t),e.tooltipInfo=t}},f={userInfoSet:function(e,t){var a=e.commit;e.state,e.dispatch,e.getters;a("userInfoSets",t)},deviceInfoSet:function(e,t){var a=e.commit;e.state,e.dispatch,e.getters;a("deviceInfoSet",t)},mainthead:function(e,t){var a=e.commit,n=e.state,i=e.dispatch,o=(e.getters,n.config),r=o.WXDeviceLibState,s=o.lastReceiveSuccessTime,d=(o.LCDDisplayDataHandlerSuccessFlag,o.taskQueueTimeLast),u=o.lastSendSuccessTime,l=n.deviceInfo.connectState;if(!n.mainTheadRunIng){c.a.i("主函数运行"),a("saveMainTheadRunIng",!0);try{1==r&&l&&(new Date).getTime()/1e3-d.getTime()/1e3>3&&(null===sendTimeOut||(new Date).getTime()/1e3-u.getTime()/1e3>13)&&(new Date).getTime()/1e3-s.getTime()/1e3>13&&(a("taskQueueTimeLastSet"),i("taskQueueExec",{}))}catch(e){c.a.e("主线程出错",e.message,e.stack)}a("saveMainTheadRunIng",!1),setTimeout(function(){i("mainthead")},1e3)}},taskQueueExec:function(e,t){var a=e.commit,n=e.state,i=e.dispatch,c=(e.getters,n.taskQueue),o=n.taskQueueIndex;t.isSetSuccess&&(a("taskQueueSet",{index:o}),o+=1,a("taskQueueIndexSet",o),o>=c.length-1&&i("readLCDDataThead")),o<c.length&&"undefined"!==c[o].isExec&&(c[o].isExec?(o+=1,a("taskQueueIndexSet",o)):i(c[o].name))},readLCDDataThead:function(e,t){var a=e.commit,n=e.state,i=e.dispatch,o=(e.getters,n.config),r=o.WXDeviceLibState,s=(o.IsReadHistoryData,o.LCDDisplayDataHandlerSuccessFlag,o.TempRHPressDataHandlerSuccessFlag,o.lastReadLCDDataTime),d=o.readLCDDataInterval,u=o.readLCDDataTheadEnable,l=(o.lastSetTime,n.deviceInfo.connectState);try{var f=n.taskQueue,m=n.taskQueueIndex;1==r&&m>=f.length-1&&l&&(new Date).getTime()/1e3-s.getTime()/1e3>d&&(s=new Date,a("configSet",{lastReadLCDDataTime:new Date}),i("getLCDDisplayData",{}))}catch(e){c.a.e("readLCDDataThead方法内错误")}u&&setTimeout(function(){i("readLCDDataThead")},2e3)},getLCDDisplayData:function(e,t){var a=(e.commit,e.state),n=(e.dispatch,e.getters,this);"function"!=typeof window.lcdDisplayDataHandler&&(!function(){var e=function(){};e.prototype=r.a.prototype,r.d.prototype=new e}(),window.lcdDisplayDataHandler=new r.b(n)),a.config.IsReadHistoryData||(window.lcdDisplayDataHandler.SendCount=1,window.lcdDisplayDataHandler.NeedReply=!0,window.lcdDisplayDataHandler.DataDomain=0,Object(s.b)(a.deviceInfo.wecDeviceId,{cmd:o.a.LCDDisplayData,data:"",dataHandler:window.lcdDisplayDataHandler,t_data:n}))},setLCDDTime:function(e,t){var a=(e.commit,e.state,e.dispatch),n=(e.getters,new Date),i=[n.getFullYear()-2e3,n.getMonth()+1,n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds()];a("SendCmd",{cmd:o.a.setTime,data:Object(d.d)(i)})},getBattery:function(e,t){var a=(e.commit,e.state,e.dispatch);e.getters;a("SendCmd",{cmd:o.a.bracelet,data:""})},getLCDDisplayDataNew:function(e,t){var a=(e.commit,e.state,e.dispatch);e.getters;a("SendCmd",{cmd:o.a.LCDDisplayDataNew,data:""})},getPersonalInfo:function(e,t){var a=(e.commit,e.state,e.dispatch);e.getters;a("SendCmd",{cmd:o.a.personalInfo,data:"01"})},setPersonalInfo:function(e,t){var a=(e.commit,e.state),n=e.dispatch;e.getters;if(void 0!==a.userInfo.height&&a.userInfo.height>0&&void 0!==a.userInfo.weight&&a.userInfo.weight>0&&(a.userInfo.height!=a.deviceInfo.Height||a.userInfo.weight!=a.deviceInfo.Weight)){var i=a.userInfo,r=i.height,s=i.weight;c.a.w("Height:"+r+",Weight:"+s),n("SendCmd",{cmd:o.a.personalInfo,data:"02"+Object(d.d)([r,s])})}else c.a.w("身高体重跳过"),n("taskQueueExec",{isSetSuccess:!0})},getFlashingWarningThreshold:function(e,t){var a=(e.commit,e.state,e.dispatch);e.getters;a("SendCmd",{cmd:o.a.FlashingWarningThreshold,data:"01"})},setFlashingWarningThreshold:function(e,t){var a=(e.commit,e.state),n=e.dispatch,i=(e.getters,a.deviceInfo),r=i.rawDeviceSetHeartRateMax,s=i.rawDeviceSetStepTarget,u=i.rawDeviceSetTempDiff,l=i.heartRateCountRemind,f=i.sportTarget,m=i.temperatureDifferenceValue,p=i.heartRateRemind,D=i.temperatureDifferenceRemind,h=i.sportTargetRemind;console.error("heartRateRemind:"+p+",rawDeviceSetHeartRateMax:"+r+",heartRateCountRemind:"+l+",rawDeviceSetStepTarget:"+s+",sportTarget:"+f+",rawDeviceSetTempDiff:"+u+",temperatureDifferenceValue:"+m);var v=p?l:0,g=Object(d.f)(Number(h?f:0).toString(16).PadLeft(4)).reverse(),S=parseInt("1"+Number(D?m:0).toString(2).PadLeft(7),2);c.a.w("设置提醒阀值执行ratemax:"+v+",steptarget:"+Object(d.d)(g)+",sportTarget:"+f+",tempdiff:"+S),n("SendCmd",{cmd:o.a.FlashingWarningThreshold,data:"02"+Object(d.d)([v].concat(g,[S]))}),n("taskQueueExec",{isSetSuccess:!0})},getUserCodeVer:function(e,t){var a=(e.commit,e.state,e.dispatch);e.getters;a("SendCmd",{cmd:o.a.userCodeVer,data:""})},getHolidayReminder:function(e,t){var a=(e.commit,e.state,e.dispatch);e.getters;a("SendCmd",{cmd:o.a.holidayReminder,data:"01"})},SendCmd:function(e,t){var a=(e.commit,e.state),n=(e.dispatch,e.getters,this);"function"!=typeof window.dataHandler&&(window.dataHandler=new r.a(void 0,void 0,n)),window.dataHandler.SendCount=1,window.dataHandler.NeedReply=!0,window.dataHandler.DataDomain=0,Object(s.b)(a.deviceInfo.wecDeviceId,{cmd:t.cmd,data:t.data,dataHandler:window.dataHandler,t_data:n})},getSleep:function(e,t){var a=e.commit,n=e.state,i=(e.dispatch,e.getters,this);console.log("读取睡眠时间"),a("configSet",{IsReadHistoryData:!0}),"function"!=typeof window.sleepDataHandler&&(!function(){var e=function(){};e.prototype=r.a.prototype,r.d.prototype=new e}(),window.sleepDataHandler=new r.d(i)),console.log(window.sleepDataHandler),window.sleepDataHandler.SendCount=1,window.sleepDataHandler.NeedReply=!0,window.sleepDataHandler.DataDomain=0,Object(s.b)(n.deviceInfo.wecDeviceId,{cmd:o.a.sleep,data:"",dataHandler:window.sleepDataHandler,t_data:i})},getSport:function(e,t){var a=(e.commit,e.state),n=(e.dispatch,e.getters,this);c.a.i("读取历史运动数据"),"function"!=typeof window.sportDataHandler&&(!function(){var e=function(){};e.prototype=r.a.prototype,r.e.prototype=new e}(),window.sportDataHandler=new r.e(n)),window.sportDataHandler.SendCount=1,window.sportDataHandler.NeedReply=!0,window.sportDataHandler.DataDomain=0,Object(s.b)(a.deviceInfo.wecDeviceId,{cmd:o.a.sports,data:"",dataHandler:window.sportDataHandler,t_data:n})},getTempRHPress:function(e,t){var a=(e.commit,e.state),n=(e.dispatch,e.getters,this);c.a.i("读取历史温湿度气压数据"),"function"!=typeof window.tempRHPressDataHandler&&(!function(){var e=function(){};e.prototype=r.a.prototype,r.f.prototype=new e}(),window.tempRHPressDataHandler=new r.f(n)),window.tempRHPressDataHandler.SendCount=1,window.tempRHPressDataHandler.NeedReply=!0,window.tempRHPressDataHandler.DataDomain=0,Object(s.b)(a.deviceInfo.wecDeviceId,{cmd:o.a.Temphumpres,data:"",dataHandler:window.tempRHPressDataHandler,t_data:n})},getHistoricalPulse:function(e,t){var a=(e.commit,e.state),n=(e.dispatch,e.getters,this);c.a.i("读取历史脉搏数据"),"function"!=typeof window.pulseDataHandler&&(!function(){var e=function(){};e.prototype=r.a.prototype,r.c.prototype=new e}(),window.pulseDataHandler=new r.c(n)),window.pulseDataHandler.SendCount=1,window.pulseDataHandler.NeedReply=!0,window.pulseDataHandler.DataDomain=0,Object(s.b)(a.deviceInfo.wecDeviceId,{cmd:o.a.historicalPulse,data:"",dataHandler:window.pulseDataHandler,t_data:n})},changeDeviceInfo:function(e,t){var a=(e.commit,e.state);e.dispatch,e.getters;c.a.w("changeDeviceInfo"),a.taskQueue.push({name:"setFlashingWarningThreshold",isExec:!1})},changePersonalInfo:function(e,t){var a=(e.commit,e.state);e.dispatch,e.getters;c.a.w("changePersonalInfo"),a.taskQueue.push({name:"setPersonalInfo",isExec:!1})}},m={};t.a={state:u,mutations:l,getters:m,actions:f}},HjSV:function(e,t){},IcnI:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a("7+uW"),i=a("NYxO"),c=a("GGBe");n.default.use(i.a);var o=new i.a.Store({state:{isLoading:!1},actions:{},mutations:{},modules:{main:c.a}})},M93x:function(e,t,a){"use strict";function n(e){a("HjSV")}var i=a("xJD8"),c=a("EUo3"),o=a("VU/8"),r=n,s=o(i.a,c.a,!1,r,null,null);t.a=s.exports},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("7+uW"),i=a("M93x"),c=a("eCfL"),o=a("QdbL"),r=a.n(o),s=a("IcnI"),d=a("ENeJ"),u=(a.n(d),a("A3j7")),l=(a.n(u),a("69WX")),f=(a.n(l),a("m2Aq"));Object(f.a)(s.a,c.a),n.default.config.productionTip=!1,n.default.use(r.a),s.a.dispatch("mainthead"),new n.default({el:"#app",store:s.a,router:c.a,template:"<App/>",components:{App:i.a},render:function(e){return e(i.a)}})},PApA:function(e,t,a){"use strict";function n(e,t,a){var i=a.commit,c=a.dispatch;a.state.main;this.SendCount=1,this.NeedReply=!1,this.DataDomain=0,this.LastDataFrameNum=0,this.ReceiveDataDomain=0,this.DataLen=0,this.DataFrameSize=0,void 0!==t&&(this.DataFrameSize=t),this.DataList=[],this.Cmd=0,void 0!==e&&(this.Cmd=e),void 0===n._initialized&&(n.prototype.DecodePacket=function(e){switch(f.a.i("DataHandler.DecodePacket"),e.Cmd){case u.a.setTime:13==e.FrameNum.datadomain?(console.log("时间设置成功！"),c("taskQueueExec",{isSetSuccess:!0}),i("configSet",{lastSetTime:new Date})):(console.log("时间设置成功！"),f.a.e({msg:"设置失败！"}));break;case u.a.bracelet:if(13==e.FrameNum.datadomain){f.a.w("读取电量成功！"),c("taskQueueExec",{isSetSuccess:!0});var t=Object(d.e)(e.Data.slice(0,1));c("deviceInfoSet",{bracelet:t}),f.a.w("电量"+t)}else f.a.e({msg:"读取电量失败！"});break;case u.a.LCDDisplayDataNew:if(13==e.FrameNum.datadomain){f.a.w("读取里程成功！"),c("taskQueueExec",{isSetSuccess:!0});var a=Object(d.e)(e.Data.slice(4,6));a>0&&(a=(a/10).toFixed(1)),c("deviceInfoSet",{km:a}),f.a.w("里程"+a)}else f.a.e({msg:"读取里程失败！"});break;case u.a.personalInfo:if(13==e.FrameNum.datadomain)if(4==e.DataLen){f.a.w("读取身高体重成功！");var n=Object(d.e)(e.Data.slice(0,1)),o=Object(d.e)(e.Data.slice(1,2));c("deviceInfoSet",{Height:n,Weight:o}),f.a.w("身高"+n+"cm,体重"+o+"kg"),c("taskQueueExec",{isSetSuccess:!0})}else f.a.w("设置身高体重成功！"),c("taskQueueExec",{isSetSuccess:!0});else f.a.e({msg:"读取或设置身高体重失败！"});break;case u.a.FlashingWarningThreshold:if(13==e.FrameNum.datadomain)if(6==e.DataLen){f.a.w("读取提醒阀值成功！");var r=Object(d.e)(e.Data.slice(0,1)),s=Object(d.e)(e.Data.slice(1,3)),l=Object(d.e)(e.Data.slice(3,4)),m=Number(l).toString(2).PadLeft(8);l=parseInt(m.slice(1,8),2),c("deviceInfoSet",{rawDeviceSetHeartRateMax:r,rawDeviceSetStepTarget:s,rawDeviceSetTempDiff:l}),f.a.w("心率"+r+",步数目标"+s+",温差"+l),c("taskQueueExec",{isSetSuccess:!0})}else f.a.w("设置提醒阀值成功！"),c("taskQueueExec",{isSetSuccess:!0});else f.a.e({msg:"读取或设置提醒阀值失败！"});break;case u.a.userCodeVer:if(13==e.FrameNum.datadomain){f.a.w("读取手环版本成功！"),c("taskQueueExec",{isSetSuccess:!0});var p=Object(d.g)(Object(d.d)(e.Data)).replace("?","");c("deviceInfoSet",{userCodeVer:p}),f.a.w("版本"+p)}else f.a.e({msg:"读取手环版本失败！"});break;case u.a.holidayReminder:if(13==e.FrameNum.datadomain){f.a.w("读取节日提醒成功！"),c("taskQueueExec",{isSetSuccess:!0});var D=Object(d.e)(e.Data.slice(0,1)),h=Object(d.e)(e.Data.slice(1,2)),v=Object(d.e)(e.Data.slice(2,3));c("deviceInfoSet",{remindonstate:D,cycle:h,nextremind:v}),f.a.w("开关显示"+D+"，周期"+h+"，下次提醒天数"+v)}else f.a.e({msg:"读取节日提醒失败！"})}},n.prototype.HistoryDataReply=function(e){var t=this,a=e.t_data,n=e.t_data,i=n.commit,o=n.state;o.main;e.FrameNum.needreply&&(15==e.FrameNum.datadomain?(this.DataLen=Object(d.e)(e.Data),this.DataLen>0?(i("configSet",{DataLen:this.DataLen/this.DataFrameSize,ReceiveDataLen:0}),this.SendCount=1,this.NeedReply=!0,this.DataDomain=14,Object(l.b)(p.deviceId(),{cmd:this.Cmd,data:"",dataHandler:this,t_data:a})):(f.a.i("历史数据已经被读空了！"),i("configSet",{DataLen:0,ReceiveDataLen:0}),i("tooltipInfoSet",""),c("taskQueueExec",{isSetSuccess:!0}))):11==e.FrameNum.datadomain?(f.a.i("收到传输完成标志！"),void 0!==this.ReceiveSuccess&&this.ReceiveSuccess(function(e){e.data.status?(f.a.w("服务器以保存成功"),i("tooltipInfoSet",""),t.SendCount=1,t.NeedReply=!1,t.DataDomain=11,Object(l.b)(p.deviceId(),{cmd:t.Cmd,data:"",dataHandler:t,t_data:a})):f.a.w("服务器以保存失败"),setTimeout(function(){c("taskQueueExec",{isSetSuccess:!0})},1500)})):e.FrameNum.datadomain>=1&&e.FrameNum.datadomain<=10&&(this.SendCount=1,this.NeedReply=!1,this.DataDomain=13,Object(l.b)(p.deviceId(),{cmd:this.Cmd,data:"",dataHandler:this,t_data:a})))},n._initialized=!0)}function i(e){var t=e.commit,a=e.dispatch,c=e.state.main;n.call(this,u.a.LCDDisplayData,14,e),void 0===i._initialized&&(i.prototype.DecodePacket=function(e){if(f.a.i("LCDDisplayDataHandler.DecodePacket"),this.ReceiveDataDomain=e.FrameNum.datadomain,13==e.FrameNum.datadomain&&14==e.Data.length){f.a.i("开始调用taskQueueExec"),a("taskQueueExec",{isSetSuccess:!0}),t("configSet",{LCDDisplayDataHandlerSuccessFlag:!0});var n=Object(d.e)(e.Data.slice(0,4)),i=Object(d.e)(e.Data.slice(4,6)),o=Object(d.e)(e.Data.slice(6,7))/10,r=Object(d.e)(e.Data.slice(7,8)),s=Object(d.e)(e.Data.slice(8,10))/10,u=Object(d.e)(e.Data.slice(10,11)),l=Object(d.e)(e.Data.slice(11,12)),m=Object(d.e)(e.Data.slice(12,14))/10;t("LCDDisplayDataSet",{sportstep:n,calorie:i,sleephour:o,heartrate:r,bodysurfacetemp:s,humidity:u,temperature:l,pressure:m}),f.a.w(c.LCDDisplayData)}},i._initialized=!0)}function c(e){var t=e.commit,a=e.state.main;n.call(this,u.a.sleep,10,e),this.SleepDataSchema={SleepStatus:null,SleepStartTime:null,SleepDuration:null,SleepStepCount:null,SleepCalorie:null,RawHex:null},void 0===c._initialized&&(c.prototype.ReceiveSuccess=function(e){var n={deviceId:a.deviceInfo.wecDeviceId,dataList:this.DataList};console.log("****睡眠历史提交(SleepDataHandler)***"),console.log(n),Object(m.b)(n).then(function(t){console.log(t),t.data.status&&e(t)}),t("configSet",{SleepDataHandlerSuccessFlag:!0})},c.prototype.DecodePacket=function(n){if(f.a.i("SleepDataHandler.DecodePacket"),this.ReceiveDataDomain=n.FrameNum.datadomain,n.t_data=e,this.HistoryDataReply(n),n.FrameNum.datadomain>=1&&n.FrameNum.datadomain<=10&&10==n.Data.length){this.LastDataFrameNum=n.FrameNum.datadomain;var i=Object(d.e)(n.Data.slice(0,1)),c=Object(d.e)(n.Data.slice(1,2)),o=Object(d.e)(n.Data.slice(2,3)),r=Object(d.e)(n.Data.slice(3,4)),s=Object(d.e)(n.Data.slice(4,5)),u=Object(d.e)(n.Data.slice(5,6)),l=Object(d.e)(n.Data.slice(6,7)),m="20"+String(c).PadLeft(2)+"-"+o+"-"+r+" "+s+":"+u+":"+l,D=Object(d.e)(n.Data.slice(7,8)),h=Object(d.e)(n.Data.slice(8,9)),v=Object(d.e)(n.Data.slice(9,10)),g=60*(60*D+h)+v,S={userId:"",type:i,deviceType:2,startTime:m,endTime:"",durationTime:g,belongDate:"",wecDeviceId:p.deviceId()};this.DataList.push(S),t("configSet",{ReceiveDataLen:a.config.ReceiveDataLen+1}),t("tooltipInfoSet","睡眠数据同步中("+a.config.ReceiveDataLen+"/"+a.config.DataLen+")，请不要关闭页面")}},c._initialized=!0)}function o(e){var t=e.commit,a=e.state.main;n.call(this,u.a.sports,14,e),this.SportDataSchema={SportStatus:null,SportStartTime:null,SportDuration:null,SportStepCount:null,SportCalorie:null,RawHex:null},void 0===o._initialized&&(o.prototype.ReceiveSuccess=function(e){var n={deviceId:a.deviceInfo.deviceId,dataList:this.DataList};f.a.e("****运动历史提交(SportDataHandler)***"),console.log(n),Object(m.c)(n).then(function(t){t.data.status&&e(t)}),t("configSet",{SportDataHandlerSuccessFlag:!0})},o.prototype.DecodePacket=function(n){if(f.a.i("SportDataHandler.DecodePacket"),this.ReceiveDataDomain=n.FrameNum.datadomain,n.t_data=e,this.HistoryDataReply(n),n.FrameNum.datadomain>=1&&n.FrameNum.datadomain<=10&&14==n.Data.length){var i=Object(d.e)(n.Data.slice(0,1)),c=Object(d.e)(n.Data.slice(1,2)),o=Object(d.e)(n.Data.slice(2,3)),r=Object(d.e)(n.Data.slice(3,4)),s=Object(d.e)(n.Data.slice(4,5)),u=Object(d.e)(n.Data.slice(5,6)),l=Object(d.e)(n.Data.slice(6,7)),m="20"+String(c).PadLeft(2)+"-"+o+"-"+r+" "+s+":"+u+":"+l,D=Object(d.e)(n.Data.slice(7,8)),h=Object(d.e)(n.Data.slice(8,9)),v=Object(d.e)(n.Data.slice(9,10)),g=60*(60*D+h)+v,S=Object(d.e)(n.Data.slice(10,12)),w=Object(d.e)(n.Data.slice(12,14)),b={userId:"",deviceType:2,type:i,stepNum:S,caloric:w,mileage:"",startTime:m,endTime:"",durationTime:g,wecDeviceId:p.deviceId()};this.DataList.push(b),f.a.w(b),t("configSet",{ReceiveDataLen:a.config.ReceiveDataLen+1}),t("tooltipInfoSet","运动数据同步中("+a.config.ReceiveDataLen+"/"+a.config.DataLen+")，请不要关闭页面")}},o._initialized=!0)}function r(e){var t=e.commit,a=e.state.main;n.call(this,u.a.Temphumpres,13,e),this.TempRHPressDataSchema={Temp:null,RH:null,Press:null,RecordTime:null,RawHex:null},void 0===r._initialized&&(r.prototype.ReceiveSuccess=function(e){var n={deviceId:a.deviceInfo.deviceId,dataList:this.DataList};console.log("****历史数据提交(TempRHPressDataHandler)***"),console.log(n),Object(m.d)(n).then(function(t){console.log(t),t.data.status&&e(t)}),t("configSet",{TempRHPressDataHandlerSuccessFlag:!0})},r.prototype.DecodePacket=function(n){if(f.a.i("TempRHPressDataHandler.DecodePacket"),this.ReceiveDataDomain=n.FrameNum.datadomain,n.t_data=e,this.HistoryDataReply(n),n.FrameNum.datadomain>=1&&n.FrameNum.datadomain<=10&&13==n.Data.length){var i=(175.72*Object(d.e)(n.Data.slice(0,2))/65536-46.85).toFixed(2),c=(125*Object(d.e)(n.Data.slice(2,4))/65535-6).toFixed(2),o=(Object(d.e)(n.Data.slice(4,7))/4096).toFixed(2),r=Object(d.e)(n.Data.slice(7,8)),s=Object(d.e)(n.Data.slice(8,9)),u=Object(d.e)(n.Data.slice(9,10)),l=Object(d.e)(n.Data.slice(10,11)),m=Object(d.e)(n.Data.slice(11,12)),D=Object(d.e)(n.Data.slice(12,13)),h="20"+String(r).PadLeft(2)+"-"+s+"-"+u+" "+l+":"+(m<10?"0"+m:m)+":"+(D<10?"0"+D:D),v={userId:0,deviceType:2,wecDeviceId:p.deviceId(),temperature:Number(i),humidity:Number(c),press:Number(o),measureType:2,testTime:h};this.DataList.push(v),f.a.w(v),t("configSet",{ReceiveDataLen:a.config.ReceiveDataLen+1}),t("tooltipInfoSet","温湿度气压数据同步中("+a.config.ReceiveDataLen+"/"+a.config.DataLen+")，请不要关闭页面")}},r._initialized=!0)}function s(e){var t=e.commit,a=e.state.main;n.call(this,u.a.historicalPulse,11,e),this.PulseDataSchema={Pulse:null,SportStatus:null,StartType:null,BodySurfaceTemp:null,RecordTime:null,RawHex:null},void 0===s._initialized&&(s.prototype.ReceiveSuccess=function(e){var n={deviceId:a.deviceInfo.deviceId,dataList:this.DataList};console.log("****历史数据提交(PulseDataHandler)***"),console.log(n),Object(m.a)(n).then(function(t){console.log(t),t.data.status&&e(t)}),t("configSet",{PulseDataHandlerSuccessFlag:!0})},s.prototype.DecodePacket=function(n){if(f.a.i("PulseDataHandler.DecodePacket"),this.ReceiveDataDomain=n.FrameNum.datadomain,n.t_data=e,this.HistoryDataReply(n),n.FrameNum.datadomain>=1&&n.FrameNum.datadomain<=10&&11==n.Data.length){var i=Object(d.e)(n.Data.slice(0,1)),c=Object(d.e)(n.Data.slice(1,2)),o=Object(d.e)(n.Data.slice(2,3)),r=Object(d.e)(n.Data.slice(3,5))/10;f.a.w("体表温度|"+r);var s=Object(d.e)(n.Data.slice(5,6)),u=Object(d.e)(n.Data.slice(6,7)),l=Object(d.e)(n.Data.slice(7,8)),m=Object(d.e)(n.Data.slice(8,9)),D=Object(d.e)(n.Data.slice(9,10)),h=Object(d.e)(n.Data.slice(10,11)),v="20"+String(s).PadLeft(2)+"-"+u+"-"+l+" "+m+":"+D+":"+h,g={userId:"",wecDeviceId:p.deviceId(),hrCount:i,result:"",deviceType:2,type:c,measureType:o,surfaceTem:r,testTime:v};this.DataList.push(g),f.a.w(g),t("configSet",{ReceiveDataLen:a.config.ReceiveDataLen+1}),t("tooltipInfoSet","历史脉搏数据同步中("+a.config.ReceiveDataLen+"/"+a.config.DataLen+")，请不要关闭页面")}},s._initialized=!0)}t.a=n,t.b=i,t.d=c,t.e=o,t.f=r,t.c=s;var d=a("/SXb"),u=a("lx87"),l=(a("TagB"),a("m2Aq")),f=a("aFVK"),m=a("SBGd"),p={deviceId:function(){return window.localStorage.getItem("wecDeviceId")}}},PBqs:function(e,t,a){"use strict";a.d(t,"b",function(){return n}),a.d(t,"a",function(){return i}),a.d(t,"c",function(){return c});var n="wxd3660e6a9eafba17",i="http://test.hesvit.com/wx/",c="http://test.hesvit.com/"},SBGd:function(e,t,a){"use strict";a.d(t,"i",function(){return u}),a.d(t,"l",function(){return l}),a.d(t,"m",function(){return f}),a.d(t,"h",function(){return m}),a.d(t,"g",function(){return p}),a.d(t,"f",function(){return D}),a.d(t,"j",function(){return h}),a.d(t,"k",function(){return v}),a.d(t,"e",function(){return g}),a.d(t,"b",function(){return S}),a.d(t,"c",function(){return w}),a.d(t,"a",function(){return b}),a.d(t,"d",function(){return I});var n=a("Xxa5"),i=a.n(n),c=a("exGp"),o=a.n(c),r=a("cKc3"),s=a("PBqs"),d=this,u=function(){var e=o()(i.a.mark(function e(t){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.localStorage.userId,e.next=3,Object(r.a)(s.a+"user/getUser.wxhtml?userId="+a,"get",t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,d)}));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=o()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(r.a)(s.a+"WeiXinUser/TestLogin?Id="+t.Id,"post",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,d)}));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=o()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(r.a)(s.a+"user/updateUser.wxhtml","post",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,d)}));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=o()(i.a.mark(function e(t){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.error("Api 方法 getHistoryData："+t),a=window.localStorage.userId,e.next=4,Object(r.a)(s.a+"healthRecord/queryHealthHty.wxhtml?deviceType=2&belongDate="+t+"&userId="+a,"get",{deviceType:2,belongDate:t});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,d)}));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=o()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(r.a)(s.a+"device/getMyDeviceRrticket.jhtml?deviceType="+t.deviceType+"&deviceNo="+t.deviceNo,"get",{});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,d)}));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=o()(i.a.mark(function e(t){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.localStorage.userId,e.next=3,Object(r.a)(s.a+"device/getMyDevice.wxhtml?userId="+a,"get",t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,d)}));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=o()(i.a.mark(function e(t){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.localStorage.userId,e.next=3,Object(r.a)(s.a+"user/getUserSet.wxhtml?deviceType=2&userId="+a,"get",t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,d)}));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=o()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("设置设备功能"),console.log(t),e.next=4,Object(r.a)(s.a+"user/updateSet.wxhtml","post",t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,d)}));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=o()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(r.a)(s.a+"device/unbandDevice.wxhtml?deviceId="+t,"get",{});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,d)}));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=o()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.error("执行saveSleep.wxhtml"),console.error(t.dataList),e.next=4,Object(r.a)(s.a+"uploadData/saveSleep.wxhtml","postDataList",t.dataList);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,d)}));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=o()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.error("执行saveSport.wxhtml"),console.error(t.dataList),e.next=4,Object(r.a)(s.a+"uploadData/saveSport.wxhtml","postDataList",t.dataList);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,d)}));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=o()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(r.a)(s.a+"uploadData/saveHeartRate.wxhtml","postDataList",t.dataList);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,d)}));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=o()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(r.a)(s.a+"uploadData/saveEnvi.wxhtml","postDataList",t.dataList);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,d)}));return function(t){return e.apply(this,arguments)}}()},TagB:function(e,t,a){"use strict";a.d(t,"a",function(){return o}),a.d(t,"b",function(){return r}),a.d(t,"c",function(){return s});var n=a("//Fk"),i=(a.n(n),a("7+uW")),c=a("A3j7");a.n(c);i.default.prototype.$dialog={confirm:c.Confirm,alert:c.Alert,toast:c.Toast,notify:c.Notify,loading:c.Loading};var o=function(e){var t=e.msg;Object(c.Alert)({mes:t||"温馨提示！"})},r=function(e){var t=e.msg,a=e.title;Object(c.Confirm)({title:a||"温馨提示",mes:t||"提醒"})},s=function(e){var t=e.msg,a=e.time;Object(c.Toast)({mes:t||"成功！",timeout:a||2e3,icon:"success"})}},aFVK:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a("//Fk"),i=(a.n(n),a("pFYg")),c=(a.n(i),a("mvHQ")),o=a.n(c),r=(a("7+uW"),a("cKc3"),a("PBqs"),{i:function(e,t,a,n,i){console.log((new Date).format("yyyy-MM-dd hh:mm:ss:S")+"\t"+(e?o()(e):"")+"\t"+(t?o()(t):"")+"\t"+(n?o()(n):"")+"\t"+(a?o()(a):"")+"\t"+(i?o()(i):""))},e:function(e,t,a,n,i){console.error((new Date).format("yyyy-MM-dd hh:mm:ss:S")+"\t"+(e?o()(e):"")+"\t"+(t?o()(t):"")+"\t"+(n?o()(n):"")+"\t"+(a?o()(a):"")+"\t"+(i?o()(i):""))},l:function(e,t,a,n,i){console.info((new Date).format("yyyy-MM-dd hh:mm:ss:S")+"\t"+(e?o()(e):"")+"\t"+(t?o()(t):"")+"\t"+(n?o()(n):"")+"\t"+(a?o()(a):"")+"\t"+(i?o()(i):""))},w:function(e,t,a,n,i){console.warn((new Date).format("yyyy-MM-dd hh:mm:ss:S")+"\t"+(e?o()(e):"")+"\t"+(t?o()(t):"")+"\t"+(n?o()(n):"")+"\t"+(a?o()(a):"")+"\t"+(i?o()(i):""))}})},cKc3:function(e,t,a){"use strict";var n=a("mvHQ"),i=a.n(n),c=a("//Fk"),o=a.n(c),r=a("mtWM"),s=a.n(r),d=a("mw3O"),u=(a.n(d),a("TagB"));console.warn(s.a.defaults.headers),t.a=function(e,t,a){s.a.defaults.timeout=5e3;var n=function(){setTimeout(function(){history.go(-1*history.length+1)},1500)};switch(t){case"get":return new o.a(function(t,i){s.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",s.a.get(e,a).then(function(e){e.status>=200&&e.status<300?e.data.status?t({data:e.data}):-3e3!==e.data.infocode&&"-3000"!==e.data.infocode&&"-1"!==e.data.infocode||n():Object(u.a)({msg:"请求出错！"})}).catch(function(e){Object(u.a)({msg:"请求出错！"}),i(e)})});case"getLogin":return new o.a(function(t,i){s.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",s.a.get(e,a).then(function(e){e.status>=200&&e.status<300?e.data.status?t({data:e.data}):(t({data:e.data}),Object(u.a)({msg:e.data.info}),-3e3!==e.data.infocode&&"-3000"!==e.data.infocode&&"-1"!==e.data.infocode||n()):Object(u.a)({msg:"请求失败"})}).catch(function(e){Object(u.a)({msg:"请求失败"}),i(e)})});case"post":return new o.a(function(t,c){s.a.defaults.headers.post["Content-Type"]="application/json",s.a.post(e,i()(a)).then(function(e){e.status>=200&&e.status<300?e.data.status?t({data:e.data}):(t({data:e.data}),Object(u.a)({msg:e.data.info}),-3e3!==e.data.infocode&&"-3000"!==e.data.infocode&&"-1"!==e.data.infocode||n()):Object(u.a)({msg:"请求失败"})}).catch(function(e){Object(u.a)({msg:"请求出错"}),c(e)})});case"postDataList":return new o.a(function(t,c){s.a.defaults.headers.post["Content-Type"]="application/json",s.a.post(e,i()(a)).then(function(e){e.status>=200&&e.status<300?e.data.status?t({data:e.data}):(t({data:e.data}),Object(u.a)({msg:e.data.info}),-3e3!==e.data.infocode&&"-3000"!==e.data.infocode&&"-1"!==e.data.infocode||n()):Object(u.a)({msg:"请求失败"})}).catch(function(e){Object(u.a)({msg:"请求出错"}),c(e)})});case"postFile":return new o.a(function(t,i){s.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",s.a.defaults.withCredentials=!1,s.a.defaults.timeout=1e4,s.a.post(e,a).then(function(e){e.status>=200&&e.status<300?e.data.status?t({data:e.data}):(Object(u.a)({msg:e.data.info}),-3e3!==e.data.infocode&&"-3000"!==e.data.infocode&&"-1"!==e.data.infocode||n()):Object(u.a)({msg:"请求失败"})}).catch(function(e){Object(u.a)({msg:"请求出错"}),i(e)})});default:console.log("缺少传输类型参数！（get or post）")}}},eCfL:function(e,t,a){"use strict";var n=a("7+uW"),i=a("/ocq"),c=function(e){return a.e(1).then(function(){var t=[a("gikJ")];e.apply(null,t)}.bind(this)).catch(a.oe)},o=function(e){return a.e(5).then(function(){var t=[a("8+XR")];e.apply(null,t)}.bind(this)).catch(a.oe)},r=function(e){return a.e(4).then(function(){var t=[a("Gee0")];e.apply(null,t)}.bind(this)).catch(a.oe)},s=function(e){return a.e(6).then(function(){var t=[a("2qSp")];e.apply(null,t)}.bind(this)).catch(a.oe)},d=function(e){return a.e(2).then(function(){var t=[a("6CoO")];e.apply(null,t)}.bind(this)).catch(a.oe)},u=function(e){return a.e(8).then(function(){var t=[a("3ci9")];e.apply(null,t)}.bind(this)).catch(a.oe)},l=function(e){return a.e(0).then(function(){var t=[a("q0Rc")];e.apply(null,t)}.bind(this)).catch(a.oe)},f=function(e){return a.e(7).then(function(){var t=[a("Be8O")];e.apply(null,t)}.bind(this)).catch(a.oe)},m=function(e){return a.e(3).then(function(){var t=[a("hyuq")];e.apply(null,t)}.bind(this)).catch(a.oe)};n.default.use(i.a),t.a=new i.a({routes:[{path:"/",name:"Home",component:c},{path:"/HealthHistory",name:"HealthHistory",component:l},{path:"/My",name:"My",component:o},{path:"/DeviceSet",name:"DeviceSet",component:r},{path:"/DeviceSet/DeviceInfo",name:"DeviceInfo",component:u},{path:"/DeviceSet/StepSettings",name:"StepSettings",component:s},{path:"/DeviceSet/RelationDevice",name:"RelationDevice",component:d},{path:"/DeviceSet/HeartRate",name:"HeartRate",component:f},{path:"/DeviceSet/TempDiff",name:"TempDiff",component:m}]})},lx87:function(e,t,a){"use strict";function n(e,t,a){void 0===a&&(a=0);var n=Number(a).toString(2).PadLeft(4),i=Number(e)+"",c=Number(t).toString(2).PadLeft(3);return parseInt(n+i+c,2)}function i(e,t){var a=Number(e).toString(2).PadLeft(4),n=Number(t).toString(2).PadLeft(4);return parseInt(a+n,2)}function c(e){var t=Number(e).toString(2).PadLeft(8);return{datadomain:parseInt(t.slice(0,4),2),needreply:parseInt(t.slice(4,5),2),sendcount:parseInt(t.slice(5,8),2)}}function o(e,t,a){void 0===t&&(t=""),t=t.replace(/ /g,"");var i,c=[85,170];i=void 0===a?[n(!0,1)]:[a];var o=[e],r=Object(d.f)(t),u=[i.length+o.length+r.length],l=[s(u.concat(i,o,r))];return c.concat(u,i,o,r,l)}function r(e){if(e.length<f.PacketStartLen+f.DataLenLen+f.FrameNumLen+f.CmdLen+f.CheckSumLen)return l.e("解析失败，包长度太小，"+e.length+"字节"),!1;this.RawHex=e,this.DataLen=e.slice(f.PacketStartLen,f.PacketStartLen+f.DataLenLen)[0];var t=f.PacketStartLen+f.DataLenLen;this.FrameNum=c(e.slice(t,t+f.FrameNumLen)[0]);var a=f.PacketStartLen+f.DataLenLen+f.FrameNumLen;this.Cmd=e.slice(a,a+f.CmdLen)[0];var n=a+f.CmdLen;if(this.Data=e.slice(n,n+this.DataLen-f.FrameNumLen-f.CmdLen),this.Data.length!=this.DataLen-2)return l.e("解析失败，包长度错误，实际"+this.Data.length+"字节，声明"+(this.DataLen-2)+"字节"),!1;void 0===r._initialized&&(r.prototype.DecodePacket=function(){switch(this.Cmd){case u.LCDDisplayData:l.i("Cmd.LCDDisplayData"),"undefined"!=typeof lcdDisplayDataHandler?lcdDisplayDataHandler.DecodePacket(this):l.e("Cmd.LCDDisplayData");break;case u.sports:l.i("Cmd.sports"),"undefined"!=typeof sportDataHandler?sportDataHandler.DecodePacket(this):l.e("Cmd.sports");break;case u.sleep:l.i("Cmd.sleep"),"undefined"!=typeof sleepDataHandler?sleepDataHandler.DecodePacket(this):l.e("Cmd.sleep");break;case u.Temphumpres:l.i("Cmd.Temphumpres"),"undefined"!=typeof tempRHPressDataHandler?tempRHPressDataHandler.DecodePacket(this):l.e("Cmd.Temphumpres");break;case u.historicalPulse:l.i("Cmd.historicalPulse"),"undefined"!=typeof pulseDataHandler?pulseDataHandler.DecodePacket(this):l.e("Cmd.historicalPulse");break;default:"undefined"!=typeof dataHandler?dataHandler.DecodePacket(this):l.e("dataHandler")}},r._initialized=!0),this.Decode=!0}function s(e){for(var t=0,a=0;a<e.length;a++)t+=e[a];return t%=256}a.d(t,"a",function(){return u}),t.d=n,t.c=i,t.b=o,t.e=r;var d=a("/SXb"),u=(a("PApA"),{sports:193,sleep:194,WeChatSports:195,Temphumpres:197,firmwareupdate:198,pulse:199,deleteBraceletData:200,bracelet:201,setTime:202,sportStatus:203,historicalPulse:204,nightHeartRateStatus:206,requestUpgradePhoneToBL:161,braceletWorkStatus:162,bootloaderVer:163,userCodeVer:164,bluetoothVer:165,LCDTest:166,HeartRateTest:167,CorrectionTemphumpres:168,getRealTime:169,testTemphumpressurface:170,accelerationSensor:171,toApplicationLayerPrograms:173,reboot:174,stopAtBootloader:175,holidayReminder:177,personalInfo:178,unitDisplay:179,generateKey:180,authenticationKey:181,PowerInquiryTooling:182,LCDDisplayData:183,LCDDisplayDataNew:190,altitudeAirPressure:184,SetFlashingConditions:185,bluetoothConnectionInterval:186,setStepSize:145,FlashingWarningThreshold:146,basalMetabolism:147}),f={PacketStartLen:2,DataLenLen:1,FrameNumLen:1,CmdLen:1,CheckSumLen:1}},m2Aq:function(e,t,a){"use strict";function n(e){l.a.e("获取getJsApiSign前"),Object(m.a)(p.a+"server/getJsApiSign","get",{}).then(function(t){var a=t.data;if(l.a.e("执行获取config配置"),l.a.e(a),a.status){if(!a.status)return void toastShow(a.info,1e3);wx.config({beta:!0,debug:!1,appId:a.info.jsapi_appId,timestamp:a.info.jsapi_timestamp,nonceStr:a.info.jsapi_nonceStr,signature:a.info.jsapi_signature,jsApiList:["openWXDeviceLib","closeWXDeviceLib","getWXDeviceInfos","getWXDeviceBindTicket","getWXDeviceUnbindTicket","startScanWXDevice","stopScanWXDevice","connectWXDevice","disconnectWXDevice","sendDataToWXDevice","onWXDeviceBindStateChange","onWXDeviceStateChange","onScanWXDeviceResult","onReceiveDataFromWXDevice","onWXDeviceBluetoothStateChange","checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone","hideMenuItems","showMenuItems","hideAllNonBaseMenuItem","showAllNonBaseMenuItem","translateVoice","startRecord","stopRecord","onVoiceRecordEnd","playVoice","onVoicePlayEnd","pauseVoice","stopVoice","uploadVoice","downloadVoice","chooseImage","previewImage","uploadImage","downloadImage","getNetworkType","openLocation","getLocation","hideOptionMenu","showOptionMenu","closeWindow","scanQRCode","chooseWXPay","openProductSpecificView","addCard","chooseCard","openCard"]}),wx.ready(function(){console.log("微信配置初始化成功！"),e()}),wx.error(function(e){window.alert("wx.error:"+d()(e))})}})}function i(e){var t=new u.e(e);t.Decode?(l.a.i(t.FrameNum),t.DecodePacket()):(l.a.e("解包失败"),"undefined"!=typeof lastDeviceID&&c(lastDeviceID,lastpacketObj,4))}function c(e,t,a){void 0===a&&(a=3),l.a.l("重发错误类型:"+a),lastDeviceID=e,lastpacketObj=t;var n;if(t.dataHandler.ReceiveDataDomain>=1&&t.dataHandler.ReceiveDataDomain<=10){l.a.l("数据帧重发HEX:");var i=t.dataHandler.LastDataFrameNum>9?1:t.dataHandler.LastDataFrameNum+1;n=Object(u.b)(t.cmd,Object(D.b)(Object(u.c)(i,a)),Object(u.d)(!0,t.dataHandler.SendCount,12))}else n=Object(u.b)(t.cmd,t.data,Object(u.d)(!0,t.dataHandler.SendCount,t.dataHandler.DataDomain));return r(e,t,n)}function o(e,t){return lastDeviceID=e,lastpacketObj=t,r(e,t,Object(u.b)(t.cmd,t.data,Object(u.d)(t.dataHandler.NeedReply,t.dataHandler.SendCount,t.dataHandler.DataDomain)))}function r(e,t,a){var n=t.t_data.commit;if(a.length<=0)return 1;if(e.length<=0)return 1;var i=0;l.a.l("开始发送数据HEX:"),l.a.i(Object(D.d)(a));var o=Object(D.c)(a);return l.a.i(o),WeixinJSBridge.invoke("sendDataToWXDevice",{deviceId:e,base64Data:o},function(a){if("sendDataToWXDevice:ok"==a.err_msg){n("configSet",{lastSendSuccessTime:new Date}),i=0,l.a.l("数据发送成功");var o=4e3;t.dataHandler.ReceiveDataDomain>=1&&t.dataHandler.ReceiveDataDomain<=10&&(o=2e3),sendTimeOut=setTimeout(function(){t.dataHandler.SendCount<5?(l.a.e("数据超时重发："+t.dataHandler.SendCount),t.dataHandler.SendCount=t.dataHandler.SendCount+1,c(e,t)):(sendTimeOut=null,n("tooltipInfoSet",""),l.a.e("数据超时5次,放弃"))},o)}else i=1,l.a.e("数据发送失败 deviceId: "+e),n("tooltipInfoSet","")}),i}a.d(t,"a",function(){return h}),t.b=o;var s=a("mvHQ"),d=a.n(s),u=(a("NYxO"),a("lx87")),l=a("aFVK"),f=a("TagB"),m=a("cKc3"),p=a("PBqs"),D=a("/SXb");window.sendTimeOut=null,window.lastDeviceID=null,window.lastpacketObj=null;var h=function(e,t){var a=e.commit,c=(e.dispatch,e.state,e.state.main);n(function(){l.a.i("进入微信配置方法"),wx.error(function(e){l.a.e("wx.error:"+d()(e))}),wx.invoke("openWXDeviceLib",{connType:"blue"},function(e){if("openWXDeviceLib:ok"===e.err_msg)switch(e.bluetoothState){case"off":a("configSet",{WXDeviceLibState:3}),l.a.i("请打开手机蓝牙"),Object(f.b)({msg:"请打开手机蓝牙"});break;case"unauthorized":a("configSet",{WXDeviceLibState:2}),l.a.i("请授权蓝牙功能"),Object(f.b)({msg:"请授权蓝牙功能"});break;case"on":a("configSet",{WXDeviceLibState:1}),l.a.i("蓝牙已打开")}else a("configSet",{WXDeviceLibState:4}),l.a.i("请授权微信蓝牙功能并打开蓝牙"),console.log("wx.scanQRCode"),Object(f.b)({msg:"请通过公众号进入本页面！"})}),wx.invoke("getWXDeviceInfos",{},function(e){if("getWXDeviceInfos:ok"===e.err_msg){var t=e.deviceInfos.length;l.a.i(e.deviceInfos);for(var n=0;n<t;n++)"connected"===e.deviceInfos[n].state?(""!=c.deviceInfo.wecDeviceId&&c.deviceInfo.wecDeviceId!=e.deviceInfos[n].deviceId||(l.a.e("设备信息"),console.error(e.deviceInfos),window.localStorage.setItem("wecDeviceId",e.deviceInfos[n].deviceId),a("deviceInfoSet",{connectState:!0})),l.a.i(e.deviceInfos[n].deviceId+"已连接")):"disconnected"===e.deviceInfos[n].state&&wx.invoke("connectWXDevice",{deviceId:e.deviceInfos[n].deviceId},function(e){console.log("connectWXDevice",e)})}else l.a.i("获取设备信息失败")}),wx.on("onWXDeviceStateChange",function(e){switch(l.a.i("onWXDeviceStateChange:"+formatJson(d()(e))),e.state){case"connecting":l.a.i(e.deviceId+"连接中");break;case"connected":""!=c.deviceInfo.wecDeviceId&&c.deviceInfo.wecDeviceId!=e.deviceId||a("deviceInfoSet",{connectState:!0}),l.a.i(e.deviceId+"已连接");break;case"disconnected":c.deviceInfo.wecDeviceId==e.deviceId&&a("deviceInfoSet",{connectState:!1}),l.a.i(e.deviceId+"连接断开"),a("tooltipInfoSet","")}}),wx.on("onWXDeviceBluetoothStateChange",function(e){switch(l.a.w("onWXDeviceBluetoothStateChange:"+formatJson(d()(e))),e.state){case"on":window.location.reload(),l.a.w("onWXDeviceBluetoothStateChange "+e.state);break;case"off":Object(f.b)({msg:"请打开手机蓝牙"}),l.a.w("onWXDeviceBluetoothStateChange "+e.state)}}),wx.on("onWXDeviceBindStateChange",function(e){switch(l.a.w("onWXDeviceBindStateChange:"+formatJson(d()(e))),e.state){case"bind":l.a.w("已绑定："+e.deviceId),wx.invoke("connectWXDevice",{deviceId:e.deviceId},function(e){window.location="#/",window.location.reload(),console.log("connectWXDevice",e)}),l.a.w("onWXDeviceBindStateChange.bind "+e.state);break;case"unbind":l.a.w("已解绑："+e.deviceId),a("tooltipInfoSet",""),l.a.w("onWXDeviceBindStateChange.unbind "+e.state)}}),wx.on("onReceiveDataFromWXDevice",function(e){if(l.a.l("onReceiveDataFromWXDevice:"+formatJson(d()(e))),e.base64Data){var t=Object(D.a)(e.base64Data);t.length>1&&170==t[0]&&85==t[1]?(null!=sendTimeOut&&(clearTimeout(sendTimeOut),sendTimeOut=null),a("configSet",{lastReceiveSuccessTime:new Date}),i(t)):l.a.e("错误包"),l.a.i("Bytes:"+d()(t)),l.a.i("HEX:"+d()(Object(D.d)(t)))}})})}},xJD8:function(e,t,a){"use strict";var n=a("mvHQ"),i=a.n(n),c=a("Dd8w"),o=a.n(c),r=a("SBGd"),s=a("NYxO"),d=a("TagB");t.a={name:"app",mounted:function(){this.getMemberInfo()},computed:o()({},Object(s.d)({tooltipInfo:function(e){return e.main.tooltipInfo}})),watch:{$route:function(e,t){console.log(e),""==e.name&&$("title").html("hesvit"),"DeviceSet"==e.name&&$("title").html("我的设备"),"Home"==e.name&&$("title").html("健康记录"),"HealthHistory"==e.name&&$("title").html("健康历史"),"RelationDevice"==e.name&&$("title").html("绑定设备"),"StepSettings"==e.name&&$("title").html("步数提醒"),"HeartRate"==e.name&&$("title").html("心率提醒"),"TempDiff"==e.name&&$("title").html("温差提醒"),"My"==e.name&&$("title").html("个人信息")}},methods:o()({},Object(s.b)(["userInfoSet","deviceInfoSet"]),Object(s.c)(["deviceInfoSetingSet"]),{getMemberInfo:function(){var e=this;Object(r.i)().then(function(t){console.log("个人信息"+i()(t)),console.log(t),t.data.status&&(window.localStorage.setItem("userId",t.data.info.userId),e.userInfoSet(t.data.info),e.getDeciceInfo(),e.getUserSet(),0==t.data.info.DeviceId&&e.$router.push({name:"RelationDevice",params:{}}))})},getDeciceInfo:function(){var e=this,t=this;Object(r.f)({}).then(function(a){var n=a.data.info;a.data.status&&(n.qrticket="http://pan.baidu.com/share/qrcode?w=150&h=150&url="+a.data.info.qrticket,n.deviceId||t.$router.replace({name:"RelationDevice",params:{}}),n.isOldBracelet&&Object(d.a)({msg:"该手环不支持蓝牙通讯功能！"}),e.deviceInfoSet(n))})},getUserSet:function(){var e=this,t=window.localStorage.userId;Object(r.j)({userId:t}).then(function(t){t.data.status&&(e.deviceInfoSet(t.data.info),e.deviceInfoSetingSet(t.data.info))})}})}}},["NHnr"]);
//# sourceMappingURL=app.a3aedbea757c2fc39be9.js.map